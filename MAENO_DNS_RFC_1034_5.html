<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0036)https://moin.qmail.jp/DNS/RFC/1034/5 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="robots" content="index,nofollow">

<title>DNS/RFC/1034/5 - moin.qmail.jp</title>
<script type="text/javascript" src="./MAENO_DNS_RFC_1034_5_files/common.js.ダウンロード"></script>

<script type="text/javascript">
<!--
var search_hint = "検索";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./MAENO_DNS_RFC_1034_5_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./MAENO_DNS_RFC_1034_5_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./MAENO_DNS_RFC_1034_5_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="./MAENO_DNS_RFC_1034_5_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static198/modern/css/msie.css">
<![endif]-->


<link rel="alternate" title="moin.qmail.jp: DNS/RFC/1034/5" href="https://moin.qmail.jp/DNS/RFC/1034/5?diffs=1&amp;show_att=1&amp;action=rss_rc&amp;unique=0&amp;page=DNS%2FRFC%2F1034%2F5&amp;ddiffs=1" type="application/rss+xml">


<link rel="Start" href="https://moin.qmail.jp/FrontPage">
<link rel="Alternate" title="Wikiマークアップ" href="https://moin.qmail.jp/DNS/RFC/1034/5?action=raw">
<link rel="Alternate" media="print" title="印刷ビュー" href="https://moin.qmail.jp/DNS/RFC/1034/5?action=print">
<link rel="Up" href="https://moin.qmail.jp/DNS/RFC/1034">
<link rel="Search" href="https://moin.qmail.jp/%E3%83%9A%E3%83%BC%E3%82%B8%E6%A4%9C%E7%B4%A2">
<link rel="Index" href="https://moin.qmail.jp/%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9">
<link rel="Glossary" href="https://moin.qmail.jp/%E5%8D%98%E8%AA%9E%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9">
<link rel="Help" href="https://moin.qmail.jp/HelpOnFormatting">
</head>

<body lang="ja" dir="ltr">

<div id="header">
<div id="logo"><a href="https://moin.qmail.jp/FrontPage"><img src="./MAENO_DNS_RFC_1034_5_files/moinmoin.png" alt="MoinMoin Logo"></a></div>

<form id="searchform" method="get" action="https://moin.qmail.jp/DNS/RFC/1034/5">
<div>
<input type="hidden" name="action" value="fullsearch">
<input type="hidden" name="context" value="180">
<label for="searchinput" style="display: none;">検索:</label>
<input id="searchinput" type="text" name="value" value="" size="20" onfocus="searchFocus(this)" onblur="searchBlur(this)" onkeyup="searchChange(this)" onchange="searchChange(this)" alt="Search" class="disabled">
<input id="titlesearch" name="titlesearch" type="submit" value="タイトル" alt="Search Titles" disabled="">
<input id="fullsearch" name="fullsearch" type="submit" value="テキスト" alt="Search Full Text" disabled="">
</div>
</form>
<script type="text/javascript">
<!--// Initialize search form
var f = document.getElementById('searchform');
f.getElementsByTagName('label')[0].style.display = 'none';
var e = document.getElementById('searchinput');
searchChange(e);
searchBlur(e);
//-->
</script>

<ul id="username"><li><a href="https://moin.qmail.jp/DNS/RFC/1034/5?action=login" id="login" rel="nofollow">ログイン</a></li></ul>
<div id="locationline">
<div id="interwiki"><span><a href="https://moin.qmail.jp/FrontPage" rel="nofollow">MoinqmailJp</a></span></div>

<ul id="pagelocation">
<li><a href="https://moin.qmail.jp/DNS">DNS</a></li><li><a href="https://moin.qmail.jp/DNS/RFC">RFC</a></li><li><a href="https://moin.qmail.jp/DNS/RFC/1034">1034</a></li><li><a href="https://moin.qmail.jp/DNS/RFC/1034/5">5</a></li>
</ul>

</div>


<ul id="navibar">
<li class="wikilink"><a href="https://moin.qmail.jp/%E6%9B%B4%E6%96%B0%E5%B1%A5%E6%AD%B4">更新履歴</a></li><li class="wikilink"><a href="https://moin.qmail.jp/%E3%83%9A%E3%83%BC%E3%82%B8%E6%A4%9C%E7%B4%A2">ページ検索</a></li><li class="wikilink"><a href="https://moin.qmail.jp/%E3%83%98%E3%83%AB%E3%83%97%E3%81%AE%E7%9B%AE%E6%AC%A1">ヘルプの目次</a></li><li class="wikilink"><a href="https://moin.qmail.jp/DNS/NEWS">DNS/NEWS</a></li><li class="userlink"><a href="https://moin.qmail.jp/Letsencrypt">Letsencrypt</a></li><li class="userlink"><a href="https://moin.qmail.jp/DNS">DNS</a></li><li class="current"><a href="https://moin.qmail.jp/DNS/RFC/1034/5">DNS/RFC/1034/5</a></li>
</ul>

<div id="pageline"><hr style="display:none;"></div>

<ul class="editbar"><li><span class="disabled">編集不可のページ</span></li><li class="toggleCommentsButton" style="display:none;"><a href="https://moin.qmail.jp/DNS/RFC/1034/5#" class="nbcomment" onclick="toggleComments();return false;">コメント</a></li><li><a class="nbinfo" href="https://moin.qmail.jp/DNS/RFC/1034/5?action=info" rel="nofollow">情報</a></li><li><a class="nbattachments" href="https://moin.qmail.jp/DNS/RFC/1034/5?action=AttachFile" rel="nofollow">添付ファイル</a></li><li>
<form class="actionsmenu" method="GET" action="https://moin.qmail.jp/DNS/RFC/1034/5">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show">その他のアクション:</option><option value="raw">Wikiテキスト</option>
<option value="print">印刷ビュー</option>
<option value="RenderAsDocbook">Docbookで表示</option>
<option value="refresh">キャッシュ削除</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">スペルチェック</option>
<option value="LikePages">似たページ</option>
<option value="LocalSiteMap">ローカルサイトマップ</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">ページ名変更</option>
<option value="CopyPage">ページコピー</option>
<option value="DeletePage" disabled="" class="disabled">ページ削除</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="MyPages">マイページ</option>
<option value="show" disabled="" class="disabled">購読ユーザ追加</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">スパム削除</option>
<option value="show" disabled="" class="disabled">このリビジョンに戻す</option>
<option value="PackagePages">ページパッケージ化</option>
<option value="SyncPages">ページ同期</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="CreateNewPage">CreateNewPage</option>
<option value="Load">ロード</option>
<option value="PageActions">PageActions</option>
<option value="Save">保存</option>
<option value="SlideShow">SlideShow</option>
<option value="Thumbnails">Thumbnails</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('その他のアクション:');
//-->
</script>
</form>
</li></ul>

</div>

<div id="page" lang="ja" dir="ltr">
<div dir="ltr" id="content" lang="ja"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><span class="anchor" id="line-6"></span><p class="line874">DNS/RFC1034/5 <span class="anchor" id="line-7"></span><a href="https://moin.qmail.jp/DNS/RFC/1034">DNS/RFC/1034</a> <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line867"></p><div class="table-of-contents"><p class="table-of-contents-heading">目次</p><ol><li>
<a href="https://moin.qmail.jp/DNS/RFC/1034/5#A5._.2BMOowvjDrMNA_RESOLVERS">5. リゾルバ RESOLVERS</a><ol><li>
<a href="https://moin.qmail.jp/DNS/RFC/1034/5#A5.1._.2BMG8wWDCBMGs_Introduction">5.1. はじめに Introduction</a></li><li>
<a href="https://moin.qmail.jp/DNS/RFC/1034/5#A5.2._.2BMK8w6TCkMKIw8zDI.2Fw0w6jC.2BMOsw0DCkMPMwvzD8MNUwpzD8MLk_Client-resolver_interface">5.2. クライアント－リゾルバインターフェース Client-resolver interface</a></li><li>
<a href="https://moin.qmail.jp/DNS/RFC/1034/5#A5.3._.2BMOowvjDrMNAwblGFkOhS1U9c_Resolver_internals">5.3. リゾルバの内部動作 Resolver internals</a></li></ol></li></ol></div> <span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line867">
</p><h1 id="A5._.2BMOowvjDrMNA_RESOLVERS">5. リゾルバ RESOLVERS</h1>
<span class="anchor" id="line-12"></span><p class="line867"><span class="anchor" id="A21"></span> <span class="anchor" id="line-13"></span>
</p><h2 id="A5.1._.2BMG8wWDCBMGs_Introduction">5.1. はじめに Introduction</h2>
<span class="anchor" id="line-14"></span><p class="line867"><span class="anchor" id="line-15"></span><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></p><pre><span class="anchor" id="line-1"></span>Resolvers are programs that interface user programs to domain name servers. 
<span class="anchor" id="line-2"></span>In the simplest case, a resolver receives a request from a user program (e.g., mail programs, TELNET, FTP)
<span class="anchor" id="line-3"></span>in the form of a subroutine call, system call etc., and returns the desired information
<span class="anchor" id="line-4"></span>in a form compatible with the local host's data formats.</pre><span class="anchor" id="line-20"></span><p class="line874">リゾルバはユーザプログラムと DNS サーバをつなぐプログラムである。 <span class="anchor" id="line-21"></span>最も単純な場合では、リゾルバはユーザプログラム（メールプログラム、TELNET、FTPなど）から <span class="anchor" id="line-22"></span>サブルーチン呼びだし、システムコールなどの形で問合せを受け取り、 <span class="anchor" id="line-23"></span>ローカルホストのデータ形式と互換性のある形式で目的の情報を返す。 <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line867"><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></p><pre><span class="anchor" id="line-1-1"></span>The resolver is located on the same machine as the program that requests
<span class="anchor" id="line-2-1"></span>the resolver's services, but it may need to consult name servers on other hosts. 
<span class="anchor" id="line-3-1"></span>Because a resolver may need to consult several name ervers,
<span class="anchor" id="line-4-1"></span>or may have the requested information in a local cache, the
<span class="anchor" id="line-5"></span>amount of time that a resolver will take to complete can vary quite a
<span class="anchor" id="line-6"></span>bit, from milliseconds to several seconds.</pre><span class="anchor" id="line-33"></span><p class="line874">リゾルバはリゾルバサービスを使うプログラムと同じマシン上で動作するが、 <span class="anchor" id="line-34"></span>他ホスト上のネームサーバに問い合わせる必要が生じることもある。 <span class="anchor" id="line-35"></span>リゾルバは複数のネームサーバに問い合わせることもあり、 <span class="anchor" id="line-36"></span>あるいは求める情報をローカルキャッシュに持っていることもあるため、 <span class="anchor" id="line-37"></span>処理を完了するまでの所要時間はミリ秒から数秒までの大きな幅がある。 <span class="anchor" id="line-38"></span><span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><span class="anchor" id="line-44"></span></p><pre><span class="anchor" id="line-1-2"></span>A very important goal of the resolver is to eliminate network delay and
<span class="anchor" id="line-2-2"></span>name server load from most requests by answering them from its cache of
<span class="anchor" id="line-3-2"></span>prior results.  It follows that caches which are shared by multiple
<span class="anchor" id="line-4-2"></span>processes, users, machines, etc., are more efficient than non-shared
<span class="anchor" id="line-5-1"></span>caches.</pre><span class="anchor" id="line-45"></span><p class="line874">リゾルバの非常に重要な目的のひとつはキャッシュしてある以前の結果を使う事によって、 <span class="anchor" id="line-46"></span>多くの問い合わせについて、ネットワークの遅延とネームサーバへの負荷をなくすことである。 <span class="anchor" id="line-47"></span>このことにより、多数のプロセス、ユーザ、マシンなどで共有されるキャッシュは <span class="anchor" id="line-48"></span>共有されないキャッシュよりより効率的である。 <span class="anchor" id="line-49"></span><span class="anchor" id="line-50"></span></p><p class="line867"><span class="anchor" id="A22"></span> <span class="anchor" id="line-51"></span>
</p><h2 id="A5.2._.2BMK8w6TCkMKIw8zDI.2Fw0w6jC.2BMOsw0DCkMPMwvzD8MNUwpzD8MLk_Client-resolver_interface">5.2. クライアント－リゾルバインターフェース Client-resolver interface</h2>
<span class="anchor" id="line-52"></span><p class="line867"><span class="anchor" id="A23"></span> <span class="anchor" id="line-53"></span>5.2.1. 代表的な機能 Typical functions <span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><span class="anchor" id="line-58"></span></p><pre><span class="anchor" id="line-1-3"></span>The client interface to the resolver is influenced by the local host's
<span class="anchor" id="line-2-3"></span>conventions, but the typical resolver-client interface has three
<span class="anchor" id="line-3-3"></span>functions:</pre><span class="anchor" id="line-59"></span><p class="line874">クライアントからみたリゾルバインタフェースは <span class="anchor" id="line-60"></span>ローカルホストの便法の影響を受けるが、 <span class="anchor" id="line-61"></span>典型的なリゾルバ－クライアント・インタフェースは以下の 3 つの機能を持つ： <span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span></p><ol type="1"><li>ホスト名からホストアドレスへの変換 Host name to host address translation. <span class="anchor" id="line-64"></span></li></ol><p class="line867"><span class="anchor" id="line-65"></span><span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span><span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span><span class="anchor" id="line-74"></span><span class="anchor" id="line-75"></span></p><pre><span class="anchor" id="line-1-4"></span>      This function is often defined to mimic a previous HOSTS.TXT
<span class="anchor" id="line-2-4"></span>      based function.  Given a character string, the caller wants
<span class="anchor" id="line-3-4"></span>      one or more 32 bit IP addresses.  Under the DNS, it
<span class="anchor" id="line-4-3"></span>      translates into a request for type A RRs.  Since the DNS does
<span class="anchor" id="line-5-2"></span>      not preserve the order of RRs, this function may choose to
<span class="anchor" id="line-6-1"></span>      sort the returned addresses or select the 'best' address if
<span class="anchor" id="line-7"></span>      the service returns only one choice to the client.  Note that
<span class="anchor" id="line-8"></span>      a multiple address return is recommended, but a single
<span class="anchor" id="line-9"></span>      address may be the only way to emulate prior HOSTS.TXT
<span class="anchor" id="line-10"></span>      services.</pre><span class="anchor" id="line-76"></span><ul><li style="list-style-type:none">この機能はHOSTS.TXTの機能を再現するためによく定義される。 <span class="anchor" id="line-77"></span>つまり、文字列に対して、32ビットIPアドレスを返すものである。 <span class="anchor" id="line-78"></span>DNS ではタイプ A RRs 問い合わせとなる。 <span class="anchor" id="line-79"></span>DNS は RRs の順序を保存しないので、 <span class="anchor" id="line-80"></span>この機能は返事のアドレスを整列するかもしれないし、 <span class="anchor" id="line-81"></span>サービスが答をひとつだけクライアントに返すときには <span class="anchor" id="line-82"></span>「最も良い」アドレスを選んだりするかもしれない。 <span class="anchor" id="line-83"></span>複数のアドレスを返すことが推奨されるが、 <span class="anchor" id="line-84"></span>以前のHOSTS.TXTサービスを模倣するには、 <span class="anchor" id="line-85"></span>1つのアドレスが唯一の選択でありうることに注意せよ。 <span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span></li></ul><p class="line874">2. ホストアドレスからホスト名への変換 Host address to host name translation <span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span></p><pre><span class="anchor" id="line-1-5"></span>      This function will often follow the form of previous
<span class="anchor" id="line-2-5"></span>      functions.  Given a 32 bit IP address, the caller wants a
<span class="anchor" id="line-3-5"></span>      character string.  The octets of the IP address are reversed,
<span class="anchor" id="line-4-4"></span>      used as name components, and suffixed with 'IN-ADDR.ARPA'.  A
<span class="anchor" id="line-5-3"></span>      type PTR query is used to get the RR with the primary name of
<span class="anchor" id="line-6-2"></span>      the host.  For example, a request for the host name
<span class="anchor" id="line-7-1"></span>      corresponding to IP address 1.2.3.4 looks for PTR RRs for
<span class="anchor" id="line-8-1"></span>      domain name '4.3.2.1.IN-ADDR.ARPA'.</pre><span class="anchor" id="line-98"></span><ul><li style="list-style-type:none">この機能はしばしば既述の機能の形に従う。 <span class="anchor" id="line-99"></span>32 ビット IP アドレスに対する(ホスト名)文字列を求める。 <span class="anchor" id="line-100"></span>IPアドレスのオクテットを逆にならべて名前要素とし、 <span class="anchor" id="line-101"></span>その後に'IN-ADDR.ARPA'をつける。 <span class="anchor" id="line-102"></span>タイプ PTR の問合せを使って、ホストの基本名の RRを得る。 <span class="anchor" id="line-103"></span>例えば、IP アドレス 1.2.3.4 に対するホスト名は <span class="anchor" id="line-104"></span>ドメイン名 '4.3.2.1.IN-ADDR.ARPA'の PTR RRs を探す。 <span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span></li></ul><p class="line874">3. 一般的な検索機能 General lookup function <span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span></p><pre><span class="anchor" id="line-1-6"></span>      This function retrieves arbitrary information from the DNS,
<span class="anchor" id="line-2-6"></span>      and has no counterpart in previous systems.  The caller
<span class="anchor" id="line-3-6"></span>      supplies a QNAME, QTYPE, and QCLASS, and wants all of the
<span class="anchor" id="line-4-5"></span>      matching RRs.  This function will often use the DNS format
<span class="anchor" id="line-5-4"></span>      for all RR data instead of the local host's, and returns all
<span class="anchor" id="line-6-3"></span>      RR content (e.g., TTL) instead of a processed form with local
<span class="anchor" id="line-7-2"></span>      quoting conventions.</pre><span class="anchor" id="line-116"></span><ul><li style="list-style-type:none">この機能はDNSから任意の情報を検索する。昔のシステムには対応する <span class="anchor" id="line-117"></span>機能はない。要求者は QNAME, QTYPE, QCLASSを指定し、 <span class="anchor" id="line-118"></span>適合するすべての RRs を求める。 <span class="anchor" id="line-119"></span>この機能はローカルホストの形式ではなく、 <span class="anchor" id="line-120"></span>どの RR データに対しても DNS RRs データの形式を使って、 <span class="anchor" id="line-121"></span>全ての RRs の内容（例えば TTL も）を返す。 <span class="anchor" id="line-122"></span>ローカルな便法を使って処理された形は使わない。 <span class="anchor" id="line-123"></span></li></ul><p class="line867"><span class="anchor" id="line-124"></span><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span></p><pre><span class="anchor" id="line-1-7"></span>When the resolver performs the indicated function, it usually has one of
<span class="anchor" id="line-2-7"></span>the following results to pass back to the client:</pre><span class="anchor" id="line-127"></span><p class="line874">リゾルバが指定された機能を実行する時、 <span class="anchor" id="line-128"></span>クライアントへは次のどれかの結果が返される： <span class="anchor" id="line-129"></span><span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span></p><pre><span class="anchor" id="line-1-8"></span>   - One or more RRs giving the requested data.</pre><span class="anchor" id="line-132"></span><ul><li style="list-style-type:none">- 要求されたデータである RRs  <span class="anchor" id="line-133"></span></li></ul><p class="line867"><span class="anchor" id="line-134"></span><span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span></p><pre><span class="anchor" id="line-1-9"></span>     In this case the resolver returns the answer in the
<span class="anchor" id="line-2-8"></span>     appropriate format.</pre><span class="anchor" id="line-137"></span><ul><li style="list-style-type:none">この場合、リゾルバは適切な形式の答を返す。 <span class="anchor" id="line-138"></span></li></ul><p class="line867"><span class="anchor" id="line-139"></span><span class="anchor" id="line-140"></span></p><pre><span class="anchor" id="line-1-10"></span>   - A name error (NE).</pre><span class="anchor" id="line-141"></span><ul><li style="list-style-type:none">- 名前エラー(NE) <span class="anchor" id="line-142"></span></li></ul><p class="line867"><span class="anchor" id="line-143"></span><span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span></p><pre><span class="anchor" id="line-1-11"></span>     This happens when the referenced name does not exist.  For
<span class="anchor" id="line-2-9"></span>     example, a user may have mistyped a host name.</pre><span class="anchor" id="line-146"></span><ul><li style="list-style-type:none">参照された名前が存在しない時におきる。 <span class="anchor" id="line-147"></span>例えば、ユーザがホスト名を間違えたか。 <span class="anchor" id="line-148"></span></li></ul><p class="line867"><span class="anchor" id="line-149"></span><span class="anchor" id="line-150"></span></p><pre><span class="anchor" id="line-1-12"></span>   - A data not found error.</pre><span class="anchor" id="line-151"></span><ul><li style="list-style-type:none">- データなしエラー <span class="anchor" id="line-152"></span></li></ul><p class="line867"><span class="anchor" id="line-153"></span><span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span></p><pre><span class="anchor" id="line-1-13"></span>     This happens when the referenced name exists, but data of the
<span class="anchor" id="line-2-10"></span>     appropriate type does not.  For example, a host address
<span class="anchor" id="line-3-7"></span>     function applied to a mailbox name would return this error
<span class="anchor" id="line-4-6"></span>     since the name exists, but no address RR is present.</pre><span class="anchor" id="line-158"></span><ul><li style="list-style-type:none">参照された名前は存在するが、該当するタイプのデータがない時におきる。 <span class="anchor" id="line-159"></span>例えば、メールボックス名に対してホストアドレスを検索すると、 <span class="anchor" id="line-160"></span>名前は存在するがアドレス RR は存在しないので、このエラーが返る。 <span class="anchor" id="line-161"></span></li></ul><p class="line867"><span class="anchor" id="line-162"></span><span class="anchor" id="line-163"></span><span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span><span class="anchor" id="line-168"></span><span class="anchor" id="line-169"></span></p><pre><span class="anchor" id="line-1-14"></span>It is important to note that the functions for translating between host
<span class="anchor" id="line-2-11"></span>names and addresses may combine the 'name error' and 'data not found'
<span class="anchor" id="line-3-8"></span>error conditions into a single type of error return, but the general
<span class="anchor" id="line-4-7"></span>function should not.  One reason for this is that applications may ask
<span class="anchor" id="line-5-5"></span>first for one type of information about a name followed by a second
<span class="anchor" id="line-6-4"></span>request to the same name for some other type of information; if the two
<span class="anchor" id="line-7-3"></span>errors are combined, then useless queries may slow the application.</pre><span class="anchor" id="line-170"></span><p class="line874">ホスト名とアドレスの間の変換機能では「名前エラー」と「データなし」は <span class="anchor" id="line-171"></span>ひとつのエラーにまとめてもいいように見えるが、 <span class="anchor" id="line-172"></span>一般機能ではまとめるべきでない。このことは重要である。 <span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span></p><p class="line874">その理由のひとつは <span class="anchor" id="line-175"></span>アプリケーションがある名前についてのあるタイプの情報を求め、 <span class="anchor" id="line-176"></span>つづいて、同じ名前についての別のタイプの情報を求めるかもしれない <span class="anchor" id="line-177"></span>からである; <span class="anchor" id="line-178"></span>もし二つのエラーが区別されていなければ、 <span class="anchor" id="line-179"></span>無用な問合せが発生し、アプリケーションは遅くなるだろう。 <span class="anchor" id="line-180"></span><span class="anchor" id="line-181"></span></p><p class="line867"><span class="anchor" id="A24"></span> <span class="anchor" id="line-182"></span>5.2.2. 別名 Aliases <span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span><span class="anchor" id="line-189"></span></p><pre><span class="anchor" id="line-1-15"></span>While attempting to resolve a particular request, the resolver may find
<span class="anchor" id="line-2-12"></span>that the name in question is an alias.  For example, the resolver might
<span class="anchor" id="line-3-9"></span>find that the name given for host name to address translation is an
<span class="anchor" id="line-4-8"></span>alias when it finds the CNAME RR.  If possible, the alias condition
<span class="anchor" id="line-5-6"></span>should be signalled back from the resolver to the client.</pre><span class="anchor" id="line-190"></span><p class="line874">問合せを解決している際にリゾルバは質問されている名前が別名だと分るることがある。 <span class="anchor" id="line-191"></span>例えば、ホスト名からアドレスへの変換時には <span class="anchor" id="line-192"></span>CNAME RRs を見つけることで、名前が別名であると判明する。 <span class="anchor" id="line-193"></span>可能なら別名だという事がリゾルバからクライアントへ伝えられるべきである。 <span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span><span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span></p><pre><span class="anchor" id="line-1-16"></span>In most cases a resolver simply restarts the query at the new name when
<span class="anchor" id="line-2-13"></span>it encounters a CNAME.  However, when performing the general function,
<span class="anchor" id="line-3-10"></span>the resolver should not pursue aliases when the CNAME RR matches the
<span class="anchor" id="line-4-9"></span>query type.  This allows queries which ask whether an alias is present.
<span class="anchor" id="line-5-7"></span>For example, if the query type is CNAME, the user is interested in the
<span class="anchor" id="line-6-5"></span>CNAME RR itself, and not the RRs at the name it points to.</pre><span class="anchor" id="line-202"></span><p class="line874">ほとんどの場合、CNAMEに出会うとリゾルバは新しい名前を使って問合せをやり直す。 <span class="anchor" id="line-203"></span>しかしながら、一般機能を実行している時には CNAME RRs が質問タイプ <span class="anchor" id="line-204"></span>と適合するなら、リゾルバは別名を続行すべきではない。 <span class="anchor" id="line-205"></span>これにより、別名の存在を尋ねる質問が許される。 <span class="anchor" id="line-206"></span>例えば、質問タイプがCNAMEなら、 <span class="anchor" id="line-207"></span>ユーザはCNAME RRs 自身に興味があるのであって、 <span class="anchor" id="line-208"></span>CNAMEが示す名前の RRs にではない。 <span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span><span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span></p><pre><span class="anchor" id="line-1-17"></span>Several special conditions can occur with aliases.  Multiple levels of
<span class="anchor" id="line-2-14"></span>aliases should be avoided due to their lack of efficiency, but should
<span class="anchor" id="line-3-11"></span>not be signalled as an error.  Alias loops and aliases which point to
<span class="anchor" id="line-4-10"></span>non-existent names should be caught and an error condition passed back
<span class="anchor" id="line-5-8"></span>to the client.</pre><span class="anchor" id="line-216"></span><p class="line874">別名にはいくつかの特別な条件がある。 <span class="anchor" id="line-217"></span>別名を多段で使うのは効率が悪いので避けるべきである。 <span class="anchor" id="line-218"></span>しかし、エラーとすべきではない。 <span class="anchor" id="line-219"></span>別名のループや存在しない名前を指す別名は検出すべきであり、 <span class="anchor" id="line-220"></span>エラーはクライアントに通知されるべきである。 <span class="anchor" id="line-221"></span><span class="anchor" id="line-222"></span></p><p class="line867"><span class="anchor" id="A25"></span> <span class="anchor" id="line-223"></span>5.2.3. 一時的障害 Temporary failures <span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span><span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span><span class="anchor" id="line-230"></span></p><pre><span class="anchor" id="line-1-18"></span>In a less than perfect world, all resolvers will occasionally be unable
<span class="anchor" id="line-2-15"></span>to resolve a particular request.  This condition can be caused by a
<span class="anchor" id="line-3-12"></span>resolver which becomes separated from the rest of the network due to a
<span class="anchor" id="line-4-11"></span>link failure or gateway problem, or less often by coincident failure or
<span class="anchor" id="line-5-9"></span>unavailability of all servers for a particular domain.</pre><span class="anchor" id="line-231"></span><p class="line874">完全ではない世界では、リゾルバが解決ができない問合せもあるだろう。 <span class="anchor" id="line-232"></span>リンクの故障やゲートウェーの問題で外部のネットワークから <span class="anchor" id="line-233"></span>切り離されたリゾルバとか、 <span class="anchor" id="line-234"></span>あまり起きないはずのことであるが、 <span class="anchor" id="line-235"></span>あるドメインの全てのサーバが同時に使えなくなるとかで発生する。 <span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span><span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span></p><pre><span class="anchor" id="line-1-19"></span>It is essential that this sort of condition should not be signalled as a
<span class="anchor" id="line-2-16"></span>name or data not present error to applications.  This sort of behavior
<span class="anchor" id="line-3-13"></span>is annoying to humans, and can wreak havoc when mail systems use the
<span class="anchor" id="line-4-12"></span>DNS.</pre><span class="anchor" id="line-242"></span><p class="line874">この種の条件はアプリケーションに名前エラーとかデータなしエラーとして <span class="anchor" id="line-243"></span>通知されることがあってはならないということが肝心である。 <span class="anchor" id="line-244"></span>この様な行動をするなら、人を不安にさせ、 <span class="anchor" id="line-245"></span>メールシステムで DNS を使うときに破滅を引き起こしうる。 <span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span><span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span><span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span><span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><span class="anchor" id="line-254"></span></p><pre><span class="anchor" id="line-1-20"></span>While in some cases it is possible to deal with such a temporary problem
<span class="anchor" id="line-2-17"></span>by blocking the request indefinitely, this is usually not a good choice,
<span class="anchor" id="line-3-14"></span>particularly when the client is a server process that could move on to
<span class="anchor" id="line-4-13"></span>other tasks.  The recommended solution is to always have temporary
<span class="anchor" id="line-5-10"></span>failure as one of the possible results of a resolver function, even
<span class="anchor" id="line-6-6"></span>though this may make emulation of existing HOSTS.TXT functions more
<span class="anchor" id="line-7-4"></span>difficult.</pre><span class="anchor" id="line-255"></span><p class="line874">無期限に要求を止めることで、この種の一時的問題を扱うことができる <span class="anchor" id="line-256"></span>場合もあるが、普通にはよい選択ではない。 <span class="anchor" id="line-257"></span>クライアントがサーバープロセスであって、他の仕事を進行できるような <span class="anchor" id="line-258"></span>ときには特にそうである。 <span class="anchor" id="line-259"></span>推奨される解決策はリゾルバ機能の取りうる結果として一時的故障を <span class="anchor" id="line-260"></span>常に認めることである。 <span class="anchor" id="line-261"></span>既存のHOSTS.TXT機能のまねはより難しくなるが。 <span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span></p><p class="line867"><span class="anchor" id="A26"></span> <span class="anchor" id="line-264"></span>
</p><h2 id="A5.3._.2BMOowvjDrMNAwblGFkOhS1U9c_Resolver_internals">5.3. リゾルバの内部動作 Resolver internals</h2>
<span class="anchor" id="line-265"></span><p class="line867"><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span><span class="anchor" id="line-270"></span></p><pre><span class="anchor" id="line-1-21"></span>Every resolver implementation uses slightly different algorithms, and
<span class="anchor" id="line-2-18"></span>typically spends much more logic dealing with errors of various sorts
<span class="anchor" id="line-3-15"></span>than typical occurances.  This section outlines a recommended basic
<span class="anchor" id="line-4-14"></span>strategy for resolver operation, but leaves details to [RFC-1035].</pre><span class="anchor" id="line-271"></span><p class="line874">各リゾルバの実装はわずかずつ異なったアルゴリズムを使っている。 <span class="anchor" id="line-272"></span>そして、通常、普通に発生することに対するよりも <span class="anchor" id="line-273"></span>各種のエラーを処理するためにずっと多くの「論理」を費している。 <span class="anchor" id="line-274"></span>この節ではリゾルバ動作として推奨される基本戦略の概略を述べる。 <span class="anchor" id="line-275"></span>ただし、詳細は[RFC1035]に任せている。 <span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span></p><p class="line867"><span class="anchor" id="A27"></span> <span class="anchor" id="line-278"></span>5.3.1. つなぎリゾルバ  Stub resolvers <span class="anchor" id="line-279"></span><span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span><span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><span class="anchor" id="line-286"></span></p><pre><span class="anchor" id="line-1-22"></span>One option for implementing a resolver is to move the resolution
<span class="anchor" id="line-2-19"></span>function out of the local machine and into a name server which supports
<span class="anchor" id="line-3-16"></span>recursive queries.  This can provide an easy method of providing domain
<span class="anchor" id="line-4-15"></span>service in a PC which lacks the resources to perform the resolver
<span class="anchor" id="line-5-11"></span>function, or can centralize the cache for a whole local network or
<span class="anchor" id="line-6-7"></span>organization.</pre><span class="anchor" id="line-287"></span><p class="line874">リゾルバを実装するひとつの方法は <span class="anchor" id="line-288"></span>解決機能をローカルマシンから取りはずして、 <span class="anchor" id="line-289"></span>再帰問合せをサポートするネームサーバに移すことである。 <span class="anchor" id="line-290"></span>こうすれば、リゾルバを動かすには資源が足りない PC にもドメインサービスを <span class="anchor" id="line-291"></span>簡単に提供することができるようになる。 <span class="anchor" id="line-292"></span>また、ローカルネットーワークや組織全体のための <span class="anchor" id="line-293"></span>キャッシュを集中することもできる。 <span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span><span class="anchor" id="line-304"></span></p><pre><span class="anchor" id="line-1-23"></span>All that the remaining stub needs is a list of name server addresses
<span class="anchor" id="line-2-20"></span>that will perform the recursive requests.  This type of resolver
<span class="anchor" id="line-3-17"></span>presumably needs the information in a configuration file, since it
<span class="anchor" id="line-4-16"></span>probably lacks the sophistication to locate it in the domain database.
<span class="anchor" id="line-5-12"></span>The user also needs to verify that the listed servers will perform the
<span class="anchor" id="line-6-8"></span>recursive service; a name server is free to refuse to perform recursive
<span class="anchor" id="line-7-5"></span>services for any or all clients.  The user should consult the local
<span class="anchor" id="line-8-2"></span>system administrator to find name servers willing to perform the
<span class="anchor" id="line-9-1"></span>service.</pre><span class="anchor" id="line-305"></span><p class="line874">残ったスタブが必要とするものは <span class="anchor" id="line-306"></span>再帰問合せを実行してくれるネームサーバのアドレス一覧だけである。 <span class="anchor" id="line-307"></span>おそらく、この種のリゾルバは <span class="anchor" id="line-308"></span>ドメインデータベースから必要な情報を取り出すこともできないだろうから、 <span class="anchor" id="line-309"></span>設定ファイル中に情報があることが必要であろう。 <span class="anchor" id="line-310"></span>ユーザはリストにあるサーバが再帰サービスを提供することを確かめる必要があろう; <span class="anchor" id="line-311"></span>ネームサーバにはクライアントからの再帰サービス要請を拒否する自由がある。 <span class="anchor" id="line-312"></span>ユーザはサービスをしてくれるネームサーバを探すときには、 <span class="anchor" id="line-313"></span>ローカルシステム管理者に相談すべきである。 <span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span><span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span><span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span></p><pre><span class="anchor" id="line-1-24"></span>This type of service suffers from some drawbacks.  Since the recursive
<span class="anchor" id="line-2-21"></span>requests may take an arbitrary amount of time to perform, the stub may
<span class="anchor" id="line-3-18"></span>have difficulty optimizing retransmission intervals to deal with both
<span class="anchor" id="line-4-17"></span>lost UDP packets and dead servers; the name server can be easily
<span class="anchor" id="line-5-13"></span>overloaded by too zealous a stub if it interprets retransmissions as new
<span class="anchor" id="line-6-9"></span>requests.  Use of TCP may be an answer, but TCP may well place burdens
<span class="anchor" id="line-7-6"></span>on the host's capabilities which are similar to those of a real
<span class="anchor" id="line-8-3"></span>resolver.</pre><span class="anchor" id="line-324"></span><p class="line874">この種のサービスにはいくつか欠点がある。 <span class="anchor" id="line-325"></span>再帰問合せにかかる時間が不明なため、 <span class="anchor" id="line-326"></span>スタブリゾルバでは UDP パケットが失われた場合と死んだサーバとの両方に <span class="anchor" id="line-327"></span>対処するような最適な再送間隔をきめるのに困るだろう; <span class="anchor" id="line-328"></span>リゾルバにより <span class="anchor" id="line-329"></span>再送信された問い合わせを新規の要求として受け取るネームサーバは <span class="anchor" id="line-330"></span>過度に熱心なスタブ により過負荷になりやすい。 <span class="anchor" id="line-331"></span>TCP を使うのが答かもしれないが、 <span class="anchor" id="line-332"></span>TCP は real リゾルバと同程度にホストの機能に負荷となるかもしれない。 <span class="anchor" id="line-333"></span><span class="anchor" id="line-334"></span></p><p class="line867"><span class="anchor" id="A28"></span> <span class="anchor" id="line-335"></span>5.3.2. 資源 Resources <span class="anchor" id="line-336"></span><span class="anchor" id="line-337"></span><span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span><span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span><span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><span class="anchor" id="line-344"></span><span class="anchor" id="line-345"></span></p><pre><span class="anchor" id="line-1-25"></span>In addition to its own resources, the resolver may also have shared
<span class="anchor" id="line-2-22"></span>access to zones maintained by a local name server.  This gives the
<span class="anchor" id="line-3-19"></span>resolver the advantage of more rapid access, but the resolver must be
<span class="anchor" id="line-4-18"></span>careful to never let cached information override zone data.  In this
<span class="anchor" id="line-5-14"></span>discussion the term 'local information' is meant to mean the union of
<span class="anchor" id="line-6-10"></span>the cache and such shared zones, with the understanding that
<span class="anchor" id="line-7-7"></span>authoritative data is always used in preference to cached data when both
<span class="anchor" id="line-8-4"></span>are present.</pre><span class="anchor" id="line-346"></span><p class="line874">リゾルバは自身の資源の他にローカルネームサーバが保守するゾーンを <span class="anchor" id="line-347"></span>共用資源としてアクセスできることがある。 <span class="anchor" id="line-348"></span>これはより速いアクセスという利点をリゾルバに与えるが、 <span class="anchor" id="line-349"></span>リゾルバはキャッシュ情報をゾーンデータより決して優先することがないよう <span class="anchor" id="line-350"></span>注意をはらわなくてはならない。 <span class="anchor" id="line-351"></span>この議論中では、用語「ローカル情報」とは <span class="anchor" id="line-352"></span>キャッシュと共有ゾーンを合わせたものを意味する。 <span class="anchor" id="line-353"></span>権威あるデータとキャッシュデータの両方があるときには、 <span class="anchor" id="line-354"></span>権威あるデータが採用されるという理解のもとに。 <span class="anchor" id="line-355"></span><span class="anchor" id="line-356"></span><span class="anchor" id="line-357"></span><span class="anchor" id="line-358"></span><span class="anchor" id="line-359"></span><span class="anchor" id="line-360"></span></p><pre><span class="anchor" id="line-1-26"></span>The following resolver algorithm assumes that all functions have been
<span class="anchor" id="line-2-23"></span>converted to a general lookup function, and uses the following data
<span class="anchor" id="line-3-20"></span>structures to represent the state of a request in progress in the
<span class="anchor" id="line-4-19"></span>resolver:</pre><span class="anchor" id="line-361"></span><p class="line874">以降のリゾルバアルゴリズムでは <span class="anchor" id="line-362"></span>すべての機能は一般的な検索機能に変換されるという仮定をしている。 <span class="anchor" id="line-363"></span>さらに、進行中の問合せの状態を表すための以下のデータ構造を使う： <span class="anchor" id="line-364"></span><span class="anchor" id="line-365"></span><span class="anchor" id="line-366"></span></p><pre><span class="anchor" id="line-1-27"></span>SNAME           the domain name we are searching for.</pre><span class="anchor" id="line-367"></span><ul><li style="list-style-type:none">探してるドメイン名 <span class="anchor" id="line-368"></span></li></ul><p class="line867"><span class="anchor" id="line-369"></span><span class="anchor" id="line-370"></span></p><pre><span class="anchor" id="line-1-28"></span>STYPE           the QTYPE of the search request.</pre><span class="anchor" id="line-371"></span><ul><li style="list-style-type:none">問合せの問合せタイプ <span class="anchor" id="line-372"></span></li></ul><p class="line867"><span class="anchor" id="line-373"></span><span class="anchor" id="line-374"></span></p><pre><span class="anchor" id="line-1-29"></span>SCLASS          the QCLASS of the search request.</pre><span class="anchor" id="line-375"></span><ul><li style="list-style-type:none">問合せの問合せクラス <span class="anchor" id="line-376"></span></li></ul><p class="line867"><span class="anchor" id="line-377"></span><span class="anchor" id="line-378"></span><span class="anchor" id="line-379"></span><span class="anchor" id="line-380"></span><span class="anchor" id="line-381"></span><span class="anchor" id="line-382"></span><span class="anchor" id="line-383"></span><span class="anchor" id="line-384"></span><span class="anchor" id="line-385"></span><span class="anchor" id="line-386"></span><span class="anchor" id="line-387"></span><span class="anchor" id="line-388"></span><span class="anchor" id="line-389"></span><span class="anchor" id="line-390"></span><span class="anchor" id="line-391"></span></p><pre><span class="anchor" id="line-1-30"></span>SLIST           a structure which describes the name servers and the
<span class="anchor" id="line-2-24"></span>                zone which the resolver is currently trying to query.
<span class="anchor" id="line-3-21"></span>                This structure keeps track of the resolver's current
<span class="anchor" id="line-4-20"></span>                best guess about which name servers hold the desired
<span class="anchor" id="line-5-15"></span>                information; it is updated when arriving information
<span class="anchor" id="line-6-11"></span>                changes the guess.  This structure includes the
<span class="anchor" id="line-7-8"></span>                equivalent of a zone name, the known name servers for
<span class="anchor" id="line-8-5"></span>                the zone, the known addresses for the name servers, and
<span class="anchor" id="line-9-2"></span>                history information which can be used to suggest which
<span class="anchor" id="line-10-1"></span>                server is likely to be the best one to try next.  The
<span class="anchor" id="line-11"></span>                zone name equivalent is a match count of the number of
<span class="anchor" id="line-12"></span>                labels from the root down which SNAME has in common with
<span class="anchor" id="line-13"></span>                the zone being queried; this is used as a measure of how
<span class="anchor" id="line-14"></span>                'close' the resolver is to SNAME.</pre><span class="anchor" id="line-392"></span><ul><li style="list-style-type:none">リゾルバが現在問い合わせようとしているネームサーバとゾーンを記 <span class="anchor" id="line-393"></span>述する構造体。 <span class="anchor" id="line-394"></span>この構造体はどのネームサーバが望ましい情報を持つかについて、 <span class="anchor" id="line-395"></span>現在のベストな推測を保持している; <span class="anchor" id="line-396"></span>受信した情報によって推測が変更されたら更新される。 <span class="anchor" id="line-397"></span>この構造体はゾーン名に等価なもの、ゾーンの既知のネームサーバー、 <span class="anchor" id="line-398"></span>ネームサーバの既知のアドレス、次に試すときにベストなネームサーバを <span class="anchor" id="line-399"></span>選ぶのに使える履歴情報などを持つ。 <span class="anchor" id="line-400"></span>ゾーン名等価なものとはルートからたどっていったときに <span class="anchor" id="line-401"></span>問合せ対象のゾーンと SNAMEが共通にもつラベルの数である; <span class="anchor" id="line-402"></span>これはリゾルバがどれくらい SNAMEに近いか計るのに使われる。 <span class="anchor" id="line-403"></span></li></ul><p class="line867"><span class="anchor" id="line-404"></span><span class="anchor" id="line-405"></span><span class="anchor" id="line-406"></span><span class="anchor" id="line-407"></span><span class="anchor" id="line-408"></span><span class="anchor" id="line-409"></span><span class="anchor" id="line-410"></span></p><pre><span class="anchor" id="line-1-31"></span>SBELT           a 'safety belt' structure of the same form as SLIST,
<span class="anchor" id="line-2-25"></span>                which is initialized from a configuration file, and
<span class="anchor" id="line-3-22"></span>                lists servers which should be used when the resolver
<span class="anchor" id="line-4-21"></span>                doesn't have any local information to guide name server
<span class="anchor" id="line-5-16"></span>                selection.  The match count will be -1 to indicate that
<span class="anchor" id="line-6-12"></span>                no labels are known to match.</pre><span class="anchor" id="line-411"></span><ul><li style="list-style-type:none">SLISTと同じ形をした「安全ベルト」構造体、 <span class="anchor" id="line-412"></span>これは設定ファイルを使って初期化される。 <span class="anchor" id="line-413"></span>ネームサーバ選択の助けとなるローカル情報を <span class="anchor" id="line-414"></span>リゾルバが持たないときに使うべきサーバの一覧である。 <span class="anchor" id="line-415"></span>一致するラベルがないことを示すときのマッチ数は -1 であろう。 <span class="anchor" id="line-416"></span></li></ul><p class="line867"><span class="anchor" id="line-417"></span><span class="anchor" id="line-418"></span><span class="anchor" id="line-419"></span><span class="anchor" id="line-420"></span><span class="anchor" id="line-421"></span><span class="anchor" id="line-422"></span><span class="anchor" id="line-423"></span><span class="anchor" id="line-424"></span><span class="anchor" id="line-425"></span><span class="anchor" id="line-426"></span><span class="anchor" id="line-427"></span></p><pre><span class="anchor" id="line-1-32"></span>CACHE           A structure which stores the results from previous
<span class="anchor" id="line-2-26"></span>                responses.  Since resolvers are responsible for
<span class="anchor" id="line-3-23"></span>                discarding old RRs whose TTL has expired, most
<span class="anchor" id="line-4-22"></span>                implementations convert the interval specified in
<span class="anchor" id="line-5-17"></span>                arriving RRs to some sort of absolute time when the RR
<span class="anchor" id="line-6-13"></span>                is stored in the cache.  Instead of counting the TTLs
<span class="anchor" id="line-7-9"></span>                down individually, the resolver just ignores or discards
<span class="anchor" id="line-8-6"></span>                old RRs when it runs across them in the course of a
<span class="anchor" id="line-9-3"></span>                search, or discards them during periodic sweeps to
<span class="anchor" id="line-10-2"></span>                reclaim the memory consumed by old RRs.</pre><span class="anchor" id="line-428"></span><ul><li style="list-style-type:none">返答を記録しておく構造体。 <span class="anchor" id="line-429"></span>TTLの期限がきた古い RRs は捨てる責任があるので、 <span class="anchor" id="line-430"></span>たいていの実装では受信した RRs にあった期間を <span class="anchor" id="line-431"></span>キャッシュに記録するときになんらかの絶対時間に変えておく。 <span class="anchor" id="line-432"></span>TTLを個々にカウントダウンするのではなく、 <span class="anchor" id="line-433"></span>検索中に古い RRs を見つけたら、無視するか捨てるかする。 <span class="anchor" id="line-434"></span>そのほか、 <span class="anchor" id="line-435"></span>古い RRs のためのメモリを回収するために周期的清掃を行う。 <span class="anchor" id="line-436"></span><span class="anchor" id="line-437"></span></li></ul><p class="line867"><span class="anchor" id="A29"></span> <span class="anchor" id="line-438"></span>5.3.3. アルゴリズム Algorithm <span class="anchor" id="line-439"></span><span class="anchor" id="line-440"></span><span class="anchor" id="line-441"></span></p><pre><span class="anchor" id="line-1-33"></span>The top level algorithm has four steps:</pre><span class="anchor" id="line-442"></span><p class="line874">アルゴリズム全体は 4 ステップからなる： <span class="anchor" id="line-443"></span><span class="anchor" id="line-444"></span><span class="anchor" id="line-445"></span><span class="anchor" id="line-446"></span></p><pre><span class="anchor" id="line-1-34"></span>   1. See if the answer is in local information, and if so return
<span class="anchor" id="line-2-27"></span>      it to the client.</pre><span class="anchor" id="line-447"></span><ul><li style="list-style-type:none">ローカル情報にあればそれを返す。 <span class="anchor" id="line-448"></span></li></ul><p class="line867"><span class="anchor" id="line-449"></span><span class="anchor" id="line-450"></span></p><pre><span class="anchor" id="line-1-35"></span>   2. Find the best servers to ask.</pre><span class="anchor" id="line-451"></span><ul><li style="list-style-type:none">尋ねるためのサーバ群をさがす。 <span class="anchor" id="line-452"></span></li></ul><p class="line867"><span class="anchor" id="line-453"></span><span class="anchor" id="line-454"></span></p><pre><span class="anchor" id="line-1-36"></span>   3. Send them queries until one returns a response.</pre><span class="anchor" id="line-455"></span><ul><li style="list-style-type:none">どれかが返事を返してくるまで、問合せを送る。 <span class="anchor" id="line-456"></span></li></ul><p class="line867"><span class="anchor" id="line-457"></span><span class="anchor" id="line-458"></span></p><pre><span class="anchor" id="line-1-37"></span>   4. Analyze the response, either:</pre><span class="anchor" id="line-459"></span><ul><li style="list-style-type:none">返事を分析する： <span class="anchor" id="line-460"></span></li></ul><p class="line867"><span class="anchor" id="line-461"></span><span class="anchor" id="line-462"></span><span class="anchor" id="line-463"></span><span class="anchor" id="line-464"></span></p><pre><span class="anchor" id="line-1-38"></span>         a. if the response answers the question or contains a name
<span class="anchor" id="line-2-28"></span>            error, cache the data as well as returning it back to
<span class="anchor" id="line-3-24"></span>            the client.</pre><span class="anchor" id="line-465"></span><ul><li style="list-style-type:none">問合せに対する答か名前エラーなら、クライアントに送るとともに <span class="anchor" id="line-466"></span>データをキャッシュする。 <span class="anchor" id="line-467"></span></li></ul><p class="line867"><span class="anchor" id="line-468"></span><span class="anchor" id="line-469"></span><span class="anchor" id="line-470"></span><span class="anchor" id="line-471"></span></p><pre><span class="anchor" id="line-1-39"></span>         b. if the response contains a better delegation to other
<span class="anchor" id="line-2-29"></span>            servers, cache the delegation information, and go to
<span class="anchor" id="line-3-25"></span>            step 2.</pre><span class="anchor" id="line-472"></span><ul><li style="list-style-type:none">他のサーバへの委譲なら、委譲情報をキャッシュしてステップ 2 に行く。 <span class="anchor" id="line-473"></span></li></ul><p class="line867"><span class="anchor" id="line-474"></span><span class="anchor" id="line-475"></span><span class="anchor" id="line-476"></span><span class="anchor" id="line-477"></span></p><pre><span class="anchor" id="line-1-40"></span>         c. if the response shows a CNAME and that is not the
<span class="anchor" id="line-2-30"></span>            answer itself, cache the CNAME, change the SNAME to the
<span class="anchor" id="line-3-26"></span>            canonical name in the CNAME RR and go to step 1.</pre><span class="anchor" id="line-478"></span><ul><li style="list-style-type:none">返事がCNAMEであり、CNAMEが答そのものではないなら、 <span class="anchor" id="line-479"></span>CNAMEをキャッシュする。 <span class="anchor" id="line-480"></span>SNAMEを CNAME RRs の正規名で置き換えて、ステップ 1に行く。 <span class="anchor" id="line-481"></span></li></ul><p class="line867"><span class="anchor" id="line-482"></span><span class="anchor" id="line-483"></span><span class="anchor" id="line-484"></span><span class="anchor" id="line-485"></span></p><pre><span class="anchor" id="line-1-41"></span>         d. if the response shows a servers failure or other
<span class="anchor" id="line-2-31"></span>            bizarre contents, delete the server from the SLIST and
<span class="anchor" id="line-3-27"></span>            go back to step 3.</pre><span class="anchor" id="line-486"></span><ul><li style="list-style-type:none">サーバの故障か他の奇異な内容なら、SLISTからサーバを削除し、 <span class="anchor" id="line-487"></span>ステップ 3に行く。 <span class="anchor" id="line-488"></span></li></ul><p class="line867"><span class="anchor" id="line-489"></span><span class="anchor" id="line-490"></span><span class="anchor" id="line-491"></span><span class="anchor" id="line-492"></span><span class="anchor" id="line-493"></span><span class="anchor" id="line-494"></span><span class="anchor" id="line-495"></span><span class="anchor" id="line-496"></span><span class="anchor" id="line-497"></span></p><pre><span class="anchor" id="line-1-42"></span>Step 1 searches the cache for the desired data. If the data is in the
<span class="anchor" id="line-2-32"></span>cache, it is assumed to be good enough for normal use.  Some resolvers
<span class="anchor" id="line-3-28"></span>have an option at the user interface which will force the resolver to
<span class="anchor" id="line-4-23"></span>ignore the cached data and consult with an authoritative server.  This
<span class="anchor" id="line-5-18"></span>is not recommended as the default.  If the resolver has direct access to
<span class="anchor" id="line-6-14"></span>a name server's zones, it should check to see if the desired data is
<span class="anchor" id="line-7-10"></span>present in authoritative form, and if so, use the authoritative data in
<span class="anchor" id="line-8-7"></span>preference to cached data.</pre><span class="anchor" id="line-498"></span><p class="line874">ステップ 1 ではキャッシュを検索する。 <span class="anchor" id="line-499"></span>データがキャッシュにあれば、通常の利用には十分使えるものとされる。 <span class="anchor" id="line-500"></span><span class="anchor" id="line-501"></span></p><p class="line874">レゾルバによっては、 <span class="anchor" id="line-502"></span>キャッシュされたデータは無視して、 <span class="anchor" id="line-503"></span>強制的に権威あるサーバに問合せさせるというオプションをユーザインタフェースに <span class="anchor" id="line-504"></span>もつものもある。 <span class="anchor" id="line-505"></span>これはデフォルトでは勧められない。 <span class="anchor" id="line-506"></span>リゾルバがどれかのネームサーバのゾーンに直接アクセスできるのなら、 <span class="anchor" id="line-507"></span>望むデータが権威を持つものかどうかを検査し、そうであれば、 <span class="anchor" id="line-508"></span>キャッシュされたデータではなく権威あるデータを使うべきである。 <span class="anchor" id="line-509"></span><span class="anchor" id="line-510"></span><span class="anchor" id="line-511"></span><span class="anchor" id="line-512"></span><span class="anchor" id="line-513"></span><span class="anchor" id="line-514"></span><span class="anchor" id="line-515"></span><span class="anchor" id="line-516"></span><span class="anchor" id="line-517"></span><span class="anchor" id="line-518"></span><span class="anchor" id="line-519"></span><span class="anchor" id="line-520"></span><span class="anchor" id="line-521"></span><span class="anchor" id="line-522"></span><span class="anchor" id="line-523"></span><span class="anchor" id="line-524"></span></p><pre><span class="anchor" id="line-1-43"></span>Step 2 looks for a name server to ask for the required data.  The
<span class="anchor" id="line-2-33"></span>general strategy is to look for locally-available name server RRs,
<span class="anchor" id="line-3-29"></span>starting at SNAME, then the parent domain name of SNAME, the
<span class="anchor" id="line-4-24"></span>grandparent, and so on toward the root.  Thus if SNAME were
<span class="anchor" id="line-5-19"></span>Mockapetris.ISI.EDU, this step would look for NS RRs for
<span class="anchor" id="line-6-15"></span>Mockapetris.ISI.EDU, then ISI.EDU, then EDU, and then . (the root).
<span class="anchor" id="line-7-11"></span>These NS RRs list the names of hosts for a zone at or above SNAME.  Copy
<span class="anchor" id="line-8-8"></span>the names into SLIST.  Set up their addresses using local data.  It may
<span class="anchor" id="line-9-4"></span>be the case that the addresses are not available.  The resolver has many
<span class="anchor" id="line-10-3"></span>choices here; the best is to start parallel resolver processes looking
<span class="anchor" id="line-11-1"></span>for the addresses while continuing onward with the addresses which are
<span class="anchor" id="line-12-1"></span>available.  Obviously, the design choices and options are complicated
<span class="anchor" id="line-13-1"></span>and a function of the local host's capabilities.  The recommended
<span class="anchor" id="line-14-1"></span>priorities for the resolver designer are:</pre><span class="anchor" id="line-525"></span><p class="line874">ステップ2 では必要なデータを問い合わせるためのネームサーバを探す。 <span class="anchor" id="line-526"></span>一般戦略はローカルに利用可能なネームサーバ RRs を以下の順に探すことだ。 <span class="anchor" id="line-527"></span>SNAMEから始めて、ルートに向かって順番に SNAME の親ドメイン名、 <span class="anchor" id="line-528"></span>そのまた親という順に。 <span class="anchor" id="line-529"></span>例えば、SNAME が Mockapetris.ISI.EDUであったとして、 <span class="anchor" id="line-530"></span>このステップは <span class="anchor" id="line-531"></span>Mockapetris.ISI.EDUのネームサーバ RRs、 <span class="anchor" id="line-532"></span>次に ISI.EDUのネームサーバ RRs、 <span class="anchor" id="line-533"></span>次にEDUのネームサーバ RRs、 <span class="anchor" id="line-534"></span>次にルートのネームサーバ RRs を探すことになる。 <span class="anchor" id="line-535"></span><span class="anchor" id="line-536"></span></p><p class="line874">これらの NS RRs は SNAMEとその祖先のゾーンのためのホストの一覧である。 <span class="anchor" id="line-537"></span>それらの名前をSLISTにコピーする。ローカルデータを使って、そのアドレスを設定する。 <span class="anchor" id="line-538"></span>アドレスはないかもしれない。 <span class="anchor" id="line-539"></span>ここでリゾルバにはいくつか選択枝がある; <span class="anchor" id="line-540"></span>最もよいのは分っているアドレスを使って進行するのと並行して、 <span class="anchor" id="line-541"></span>アドレス解決を始めることだ。 <span class="anchor" id="line-542"></span>デザインの決定と選択は複雑であり、ローカルホストの能力によります。 <span class="anchor" id="line-543"></span>リゾルバ設計者へのお勧めの優先順位は： <span class="anchor" id="line-544"></span><span class="anchor" id="line-545"></span><span class="anchor" id="line-546"></span><span class="anchor" id="line-547"></span><span class="anchor" id="line-548"></span><span class="anchor" id="line-549"></span><span class="anchor" id="line-550"></span></p><pre><span class="anchor" id="line-1-44"></span>   1. Bound the amount of work (packets sent, parallel processes
<span class="anchor" id="line-2-34"></span>      started) so that a request can't get into an infinite loop or
<span class="anchor" id="line-3-30"></span>      start off a chain reaction of requests or queries with other
<span class="anchor" id="line-4-25"></span>      implementations EVEN IF SOMEONE HAS INCORRECTLY CONFIGURED
<span class="anchor" id="line-5-20"></span>      SOME DATA.</pre><span class="anchor" id="line-551"></span><ol type="1"><li>仕事の量 (送信パケット数、平行プロセス数)を制限せよ。 <span class="anchor" id="line-552"></span><ul><li style="list-style-type:none">これは 『誰かがなにかのデータを間違って設定した場合』でも <span class="anchor" id="line-553"></span>問合せが無限ループに入ることがないように、 <span class="anchor" id="line-554"></span>また、他の実装と合わせて <span class="anchor" id="line-555"></span>問合せの連鎖反応をひき起すことがないようにするためである。 <span class="anchor" id="line-556"></span></li></ul></li></ol><p class="line867"><span class="anchor" id="line-557"></span><span class="anchor" id="line-558"></span></p><pre><span class="anchor" id="line-1-45"></span>   2. Get back an answer if at all possible.</pre><span class="anchor" id="line-559"></span><ul><li style="list-style-type:none">可能なら答を戻す。 <span class="anchor" id="line-560"></span></li></ul><p class="line867"><span class="anchor" id="line-561"></span><span class="anchor" id="line-562"></span></p><pre><span class="anchor" id="line-1-46"></span>   3. Avoid unnecessary transmissions.</pre><span class="anchor" id="line-563"></span><ul><li style="list-style-type:none">不必要な転送を避けよ。 <span class="anchor" id="line-564"></span></li></ul><p class="line867"><span class="anchor" id="line-565"></span><span class="anchor" id="line-566"></span></p><pre><span class="anchor" id="line-1-47"></span>   4. Get the answer as quickly as possible.</pre><span class="anchor" id="line-567"></span><ul><li style="list-style-type:none">できるだけ速く答を求めよ。 <span class="anchor" id="line-568"></span></li></ul><p class="line867"><span class="anchor" id="line-569"></span><span class="anchor" id="line-570"></span><span class="anchor" id="line-571"></span><span class="anchor" id="line-572"></span><span class="anchor" id="line-573"></span><span class="anchor" id="line-574"></span><span class="anchor" id="line-575"></span><span class="anchor" id="line-576"></span><span class="anchor" id="line-577"></span><span class="anchor" id="line-578"></span><span class="anchor" id="line-579"></span><span class="anchor" id="line-580"></span></p><pre><span class="anchor" id="line-1-48"></span>If the search for NS RRs fails, then the resolver initializes SLIST from
<span class="anchor" id="line-2-35"></span>the safety belt SBELT.  The basic idea is that when the resolver has no
<span class="anchor" id="line-3-31"></span>idea what servers to ask, it should use information from a configuration
<span class="anchor" id="line-4-26"></span>file that lists several servers which are expected to be helpful.
<span class="anchor" id="line-5-21"></span>Although there are special situations, the usual choice is two of the
<span class="anchor" id="line-6-16"></span>root servers and two of the servers for the host's domain.  The reason
<span class="anchor" id="line-7-12"></span>for two of each is for redundancy.  The root servers will provide
<span class="anchor" id="line-8-9"></span>eventual access to all of the domain space.  The two local servers will
<span class="anchor" id="line-9-5"></span>allow the resolver to continue to resolve local names if the local
<span class="anchor" id="line-10-4"></span>network becomes isolated from the internet due to gateway or link
<span class="anchor" id="line-11-2"></span>failure.</pre><span class="anchor" id="line-581"></span><p class="line874">NS RRs の探索に失敗したら、リゾルバは安全ベルト SBELT でSLISTを初期化する。 <span class="anchor" id="line-582"></span><span class="anchor" id="line-583"></span></p><p class="line874">尋ねるべきサーバがかわからない時には <span class="anchor" id="line-584"></span>設定ファイルある助けが期待できるサーバの一覧を使うというのが <span class="anchor" id="line-585"></span>基本的な考えです。 <span class="anchor" id="line-586"></span>そうでないこともあるが、 <span class="anchor" id="line-587"></span>通常はルートサーバのうちの二つとホストのドメインのサーバから二つを選ぶ。 <span class="anchor" id="line-588"></span>二つ選ぶ理由は冗長正のためである。 <span class="anchor" id="line-589"></span>ルートサーバは全ドメイン空間のいかなる部分へのアクセスも可能とする。 <span class="anchor" id="line-590"></span>ローカルサーバはゲートウェイやリンクの故障でローカルネットワークが <span class="anchor" id="line-591"></span>インターネットから切り離されてもローカルな名前の解決は続けられるためである。 <span class="anchor" id="line-592"></span><span class="anchor" id="line-593"></span><span class="anchor" id="line-594"></span><span class="anchor" id="line-595"></span><span class="anchor" id="line-596"></span><span class="anchor" id="line-597"></span><span class="anchor" id="line-598"></span><span class="anchor" id="line-599"></span></p><pre><span class="anchor" id="line-1-49"></span>In addition to the names and addresses of the servers, the SLIST data
<span class="anchor" id="line-2-36"></span>structure can be sorted to use the best servers first, and to insure
<span class="anchor" id="line-3-32"></span>that all addresses of all servers are used in a round-robin manner.  The
<span class="anchor" id="line-4-27"></span>sorting can be a simple function of preferring addresses on the local
<span class="anchor" id="line-5-22"></span>network over others, or may involve statistics from past events, such as
<span class="anchor" id="line-6-17"></span>previous response times and batting averages.</pre><span class="anchor" id="line-600"></span><p class="line874">サーバの名前とアドレス以外に SLIST データ構造体は <span class="anchor" id="line-601"></span>使用するのによいサーバが最初にきて、 <span class="anchor" id="line-602"></span>全サーバのゼンアドレスがラウンドロビンで使われるように <span class="anchor" id="line-603"></span>順に並べておいてよい。 <span class="anchor" id="line-604"></span><span class="anchor" id="line-605"></span></p><p class="line874">並べ替えはローカルネットワークを優先する単純なものであったり、 <span class="anchor" id="line-606"></span>以前の応答時間や打率などの過去のイベントの統計を利用するものであったりしてよい。 <span class="anchor" id="line-607"></span><span class="anchor" id="line-608"></span><span class="anchor" id="line-609"></span><span class="anchor" id="line-610"></span><span class="anchor" id="line-611"></span><span class="anchor" id="line-612"></span><span class="anchor" id="line-613"></span><span class="anchor" id="line-614"></span><span class="anchor" id="line-615"></span><span class="anchor" id="line-616"></span></p><pre><span class="anchor" id="line-1-50"></span>Step 3 sends out queries until a response is received.  The strategy is
<span class="anchor" id="line-2-37"></span>to cycle around all of the addresses for all of the servers with a
<span class="anchor" id="line-3-33"></span>timeout between each transmission.  In practice it is important to use
<span class="anchor" id="line-4-28"></span>all addresses of a multihomed host, and too aggressive a retransmission
<span class="anchor" id="line-5-23"></span>policy actually slows response when used by multiple resolvers
<span class="anchor" id="line-6-18"></span>contending for the same name server and even occasionally for a single
<span class="anchor" id="line-7-13"></span>resolver.  SLIST typically contains data values to control the timeouts
<span class="anchor" id="line-8-10"></span>and keep track of previous transmissions.</pre><span class="anchor" id="line-617"></span><p class="line874">ステップ 3では返事があるまで、問合せを送る。 <span class="anchor" id="line-618"></span>戦略は問合せ毎にタイムアウトを待ちながら、 <span class="anchor" id="line-619"></span>全てのサーバの全アドレスをまわって順番に問合せることだ。 <span class="anchor" id="line-620"></span>特にマルチホームホストにはその全アドレスを使うことが重要である。 <span class="anchor" id="line-621"></span>あまり攻撃的な再送方針をもちいると、 <span class="anchor" id="line-622"></span>同じサーバに対して複数のリゾルバが競合したりして <span class="anchor" id="line-623"></span>返答が遅くなる。ひとつのリゾルバでもおきることがある。 <span class="anchor" id="line-624"></span><span class="anchor" id="line-625"></span></p><p class="line874">一般にSLISTはタイムアウトを制御し、過去の更新を記録するデータ値をもつ。 <span class="anchor" id="line-626"></span><span class="anchor" id="line-627"></span><span class="anchor" id="line-628"></span><span class="anchor" id="line-629"></span><span class="anchor" id="line-630"></span><span class="anchor" id="line-631"></span><span class="anchor" id="line-632"></span><span class="anchor" id="line-633"></span><span class="anchor" id="line-634"></span></p><pre><span class="anchor" id="line-1-51"></span>Step 4 involves analyzing responses.  The resolver should be highly
<span class="anchor" id="line-2-38"></span>paranoid in its parsing of responses.  It should also check that the
<span class="anchor" id="line-3-34"></span>response matches the query it sent using the ID field in the response.
<span class="anchor" id="line-4-29"></span>The ideal answer is one from a server authoritative for the query which
<span class="anchor" id="line-5-24"></span>either gives the required data or a name error.  The data is passed back
<span class="anchor" id="line-6-19"></span>to the user and entered in the cache for future use if its TTL is
<span class="anchor" id="line-7-14"></span>greater than zero.</pre><span class="anchor" id="line-635"></span><p class="line874">ステップ4 では返事を分析する。 <span class="anchor" id="line-636"></span>リゾルバは返事を解析するときには高度に神経を使うべきだ。 <span class="anchor" id="line-637"></span>返事の ID フィールドを使って、返事と質問が対応しているかを検査すべきだ。 <span class="anchor" id="line-638"></span>理想的な答とは問合せに対する権威をもつサーバからのものであって、 <span class="anchor" id="line-639"></span>求めるデータまたは名前エラーがであるものである。 <span class="anchor" id="line-640"></span>データはユーザに渡されるとともに、 <span class="anchor" id="line-641"></span>TTL が 0 より大きいものは将来の利用に備えてキャッシュされる。 <span class="anchor" id="line-642"></span><span class="anchor" id="line-643"></span><span class="anchor" id="line-644"></span><span class="anchor" id="line-645"></span><span class="anchor" id="line-646"></span><span class="anchor" id="line-647"></span><span class="anchor" id="line-648"></span><span class="anchor" id="line-649"></span><span class="anchor" id="line-650"></span></p><pre><span class="anchor" id="line-1-52"></span>If the response shows a delegation, the resolver should check to see
<span class="anchor" id="line-2-39"></span>that the delegation is 'closer' to the answer than the servers in SLIST
<span class="anchor" id="line-3-35"></span>are.  This can be done by comparing the match count in SLIST with that
<span class="anchor" id="line-4-30"></span>computed from SNAME and the NS RRs in the delegation.  If not, the reply
<span class="anchor" id="line-5-25"></span>is bogus and should be ignored.  If the delegation is valid the NS
<span class="anchor" id="line-6-20"></span>delegation RRs and any address RRs for the servers should be cached.
<span class="anchor" id="line-7-15"></span>The name servers are entered in the SLIST, and the search is restarted.</pre><span class="anchor" id="line-651"></span><p class="line874">返事が委譲を示しているとき、 <span class="anchor" id="line-652"></span>リゾルバは委譲が SLIST 中のサーバーよりも答に「近い」か確認すべきだ。 <span class="anchor" id="line-653"></span>これは SLIST と SNAMEの一致数と、委任とSNAMEの一致数を比較することで可能だ。 <span class="anchor" id="line-654"></span>近くなければ答はゴミで無視される。 <span class="anchor" id="line-655"></span>委譲が正当であれば、NS 委譲 RRs とサーバーのすべてのアドレス RRs とを <span class="anchor" id="line-656"></span>キャッシュする。 <span class="anchor" id="line-657"></span>これらのネームサーバは SLISTに含められ、探索を再開する。 <span class="anchor" id="line-658"></span><span class="anchor" id="line-659"></span><span class="anchor" id="line-660"></span><span class="anchor" id="line-661"></span><span class="anchor" id="line-662"></span></p><pre><span class="anchor" id="line-1-53"></span>If the response contains a CNAME, the search is restarted at the CNAME
<span class="anchor" id="line-2-40"></span>unless the response has the data for the canonical name or if the CNAME
<span class="anchor" id="line-3-36"></span>is the answer itself.</pre><span class="anchor" id="line-663"></span><p class="line874">返事がCNAMEを含んでいる場合、 <span class="anchor" id="line-664"></span>返事に正規名のデータがあるとか、CNAME自身が答であるとかいうのでなければ、 <span class="anchor" id="line-665"></span>CNAMEから探索が再開される。 <span class="anchor" id="line-666"></span><span class="anchor" id="line-667"></span><span class="anchor" id="line-668"></span></p><pre><span class="anchor" id="line-1-54"></span>Details and implementation hints can be found in [RFC-1035].</pre><span class="anchor" id="line-669"></span><p class="line874">詳細と実装の助言は[RFC-1035]にある。 <span class="anchor" id="line-670"></span><span class="anchor" id="line-671"></span></p><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-672"></span>2002-12-31 訳 前野年紀 <span class="anchor" id="line-673"></span><span class="anchor" id="bottom"></span></p></div>
<div id="pagebottom"></div>
</div>


<div id="footer">
<ul class="editbar"><li><span class="disabled">編集不可のページ</span></li><li class="toggleCommentsButton" style="display:none;"><a href="https://moin.qmail.jp/DNS/RFC/1034/5#" class="nbcomment" onclick="toggleComments();return false;">コメント</a></li><li><a class="nbinfo" href="https://moin.qmail.jp/DNS/RFC/1034/5?action=info" rel="nofollow">情報</a></li><li><a class="nbattachments" href="https://moin.qmail.jp/DNS/RFC/1034/5?action=AttachFile" rel="nofollow">添付ファイル</a></li><li>
<form class="actionsmenu" method="GET" action="https://moin.qmail.jp/DNS/RFC/1034/5">
<div>
    
    <select name="action" onchange="if ((this.selectedIndex != 0) &amp;&amp;
                      (this.options[this.selectedIndex].disabled == false)) {
                this.form.submit();
            }
            this.selectedIndex = 0;">
        <option value="show">その他のアクション:</option><option value="raw">Wikiテキスト</option>
<option value="print">印刷ビュー</option>
<option value="RenderAsDocbook">Docbookで表示</option>
<option value="refresh">キャッシュ削除</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="SpellCheck">スペルチェック</option>
<option value="LikePages">似たページ</option>
<option value="LocalSiteMap">ローカルサイトマップ</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="RenamePage" disabled="" class="disabled">ページ名変更</option>
<option value="CopyPage">ページコピー</option>
<option value="DeletePage" disabled="" class="disabled">ページ削除</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="MyPages">マイページ</option>
<option value="show" disabled="" class="disabled">購読ユーザ追加</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="show" disabled="" class="disabled">スパム削除</option>
<option value="show" disabled="" class="disabled">このリビジョンに戻す</option>
<option value="PackagePages">ページパッケージ化</option>
<option value="SyncPages">ページ同期</option>
<option value="show" disabled="" class="disabled">------------------------</option>
<option value="CreateNewPage">CreateNewPage</option>
<option value="Load">ロード</option>
<option value="PageActions">PageActions</option>
<option value="Save">保存</option>
<option value="SlideShow">SlideShow</option>
<option value="Thumbnails">Thumbnails</option>
    </select>
    
    
</div>
<script type="text/javascript">
<!--// Init menu
actionsMenuInit('その他のアクション:');
//-->
</script>
</form>
</li></ul>

<ul id="credits">
<li><a href="http://moinmo.in/" title="This site uses the MoinMoin Wiki software.">MoinMoin Powered</a></li><li><a href="http://moinmo.in/Python" title="MoinMoin is written in Python.">Python Powered</a></li><li><a href="http://moinmo.in/GPL" title="MoinMoin is GPL licensed.">GPL licensed</a></li><li><a href="http://validator.w3.org/check?uri=referer" title="Click here to validate this page.">Valid HTML 4.01</a></li>
</ul>


</div>



</body></html>